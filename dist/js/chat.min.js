const chatModule=function(){let e=document.querySelector(".send-message-btn-js"),t=document.querySelector(".send-message-js");closeChat=document.querySelector(".close-chat-js"),messageInput=document.querySelector(".client-massage-text-js"),messagesContainer=document.querySelector(".messages-container"),modalChat=document.querySelector(".modal-chat-js"),zoomChatBtn=document.querySelector(".zoom-chat-js"),lastMessage={client:"",agent:""};let s=new class{constructor(e){this.audio=e.audio,this.onSendClientMessage=e.onSendClientMessage}"change–†roperties"(e){if(e)for(let t in e)switch(t){case"audio":this.audio=e[t];break;case"onSendClientMessage":this.onSendClientMessage=e[t];break;case"prompts":this.prompts_gen(e[t])}}prompts_gen(e){let t=document.createElement("div");t.classList.add("message-prompts","message-prompts-js","active");for(let s=0;s<e.length;s++){let a=document.createElement("button");a.classList.add("prompt","prompts-js"),a.innerHTML=e[s],t.appendChild(a)}messagesContainer.appendChild(t)}}({audio:!1,onSendClientMessage:!1});function a(){modalChat.classList.toggle("active")}function n(e){let t=document.querySelector(".message-prompts-js");t&&t.classList.contains("active")&&t.classList.remove("active"),messagesContainer.appendChild(e),messagesContainer.scrollTop=messagesContainer.scrollHeight,messageInput.value=""}function o(e){let t=document.createElement("div");if(t.classList.add("message"),!e.message.length)return!1;"client"===e.type?(t.classList.add("client"),t.innerHTML=`<div class="text-container">\n\t\t\t\t\t\t\t\t\t\t\t<p class="message-text">${e.message}</p>\n\t\t\t\t\t\t\t\t\t\t</div>`,lastMessage.client=e.message,s.onSendClientMessage&&s.onSendClientMessage()):"agent"==e.type&&(t.classList.add("agent"),t.innerHTML=`<img src="${e.sender.avatar}" alt="sender avatar" class="avatar">\n\t\t\t\t\t\t\t\t\t\t<div class="text-container">\n\t\t\t\t\t\t\t\t\t\t\t<p class="sender-name">${e.sender.name}</p>\n\t\t\t\t\t\t\t\t\t\t\t<p class="message-text">${e.message}</p>\n\t\t\t\t\t\t\t\t\t\t</div>`,lastMessage.agent=e.message,s.audio&&function(){let e=new Audio;e.src="audio/chatModule-newMessage.mp3",e.autoplay=!0}()),n(t)}if(s.audio){let e=new Audio;e.src="../audio/chatModule-newMessage.mp3",e.autoplay=!0}return zoomChatBtn.onclick=function(){modalChat.classList.toggle("zoom-in"),zoomChatBtn.classList.toggle("active")},e.onclick=function(){o({type:"client",message:messageInput.value})},t.onsubmit=function(){return o({type:"client",message:messageInput.value}),!1},messagesContainer.onclick=function(e){let t=e.target;t.classList.contains("prompts-js")&&o({type:"client",message:t.innerHTML})},closeChat.onclick=function(){a()},{chat_actions:a,create_message:o,lastMessage:lastMessage,globalConfig:s}}();